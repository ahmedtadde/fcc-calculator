'use strict';var tabs={'main-section':document.getElementById('main-section'),'history-section':document.getElementById('history-section'),'default-funcs':document.getElementById('default-funcs'),'alt-funcs':document.getElementById('alt-funcs')},input=document.getElementById('input'),btns=Array.from(document.getElementsByClassName('btn')),tabBtns=Array.from(document.getElementsByClassName('btn-tab')),inputBtns=Array.from(document.getElementsByClassName('btn-input')),commandBtns=Array.from(document.getElementsByClassName('btn-command')),output=document.getElementById('output'),eval_history=document.getElementById('history_records'),unit='DEG',memory=0,answer=0,cursor;(function(){input.onkeyup=function(a){var b=a.keyCode?a.keyCode:a.which;13===b&&evaluate()},input.onmouseup=function(){cursor=input.selectionEnd},btns.forEach(function(a){tabBtns.includes(a)||(a.onclick=function(){(function(){a.classList.add('active'),setTimeout(function(){a.classList.remove('active')},250)})()})}),tabBtns.forEach(function(a){a.onclick=function(){var b=a.classList;b.contains('active')?b.remove('active'):b.add('active')}}),inputBtns.forEach(function(a){var b=a.onclick;a.onclick=function(){(function(c){c()})(b),function(c){var d=a.hasAttribute('data-input');if(cursor!==void 0){var f=c.value,g=f.split(''),h=d?a.getAttribute('data-input'):a.textContent;g.splice(cursor,0,h),cursor+=h.length,c.value=g.join('')}else c.value+=d?a.getAttribute('data-input'):a.textContent}(input)}}),commandBtns.forEach(function(a){var b=a.onclick;a.onclick=function(){(function(c){c()})(b),function(c){switch(c){case'switch_unit':switchUnit(a);break;case'switch_tab':switchTab(a);break;case'evaluate':evaluate();break;case'input_last_answer':inputLastAnswer();break;case'clear_all':clearDisplays();break;case'clear_input':clearInput();break;case'clear_last_input':clearLastInput();break;case'get_memory':output.textContent=memory;break;case'clear_memory':memory=0,output.textContent=memory;break;case'add_to_memory':memory=parseFloat(memory)+parseFloat(answer),output.textContent=memory;break;case'substract_from_memory':memory=parseFloat(memory)-parseFloat(answer),output.textContent=memory;break;case'clear_history':eval_history.innerHTML='';break;default:}}(a.getAttribute('data-command'))}})})(),function(){var a={};['sin','cos','tan','sec','cot','csc'].forEach(function(b){var c=math[b],d=function(f){return'DEG'==unit?c(2*(f/360)*Math.PI):'GRAD'==unit?c(2*(f/400)*Math.PI):c(f)};a[b]=math.typed(b,{number:d,'Array | Matrix':function ArrayMatrix(f){return math.map(f,d)}})}),['asin','acos','atan','atan2','acot','acsc','asec'].forEach(function(b){var c=math[b],d=function(f){var g=c(f);return'number'==typeof g?'DEG'==unit?360*(g/2/Math.PI):'GRAD'==unit?400*(g/2/Math.PI):g:g};a[b]=math.typed(b,{number:d,'Array | Matrix':function ArrayMatrix(f){return math.map(f,d)}})}),math.import(a,{override:!0})}();function switchTab(a){var b=a.getAttribute('data-tab-active'),c=a.getAttribute('data-tab-hidden');tabs[b].classList.add('hidden'),tabs[c].classList.remove('hidden'),a.setAttribute('data-tab-active',c),a.setAttribute('data-tab-hidden',b)}function evaluate(){try{var a;output.innerHTML='',a=math.parse(input.value),a=math.format(a.compile().eval()),answer=a.toString().replace(/\[|\]/g,''),output.textContent=answer;var b=document.createElement('div');b.setAttribute('class','history_record');var c=document.createElement('span');c.setAttribute('class','btn'),c.innerHTML='<i class="fa fa-times-circle"></i> Clear',c.onclick=function(){c.parentElement.remove()};var d=document.createElement('span');d.setAttribute('class','btn'),d.textContent=input.value+' = '+answer,d.style.textAlign='right',d.onclick=function(){var f='('+d.textContent.split(' = ')[0]+')';if(cursor!==void 0){var g=input.value,h=g.split('');h.splice(cursor,0,f),cursor+=f.length,input.value=h.join('')}else input.value+=f},b.appendChild(c),b.appendChild(d),eval_history.appendChild(b)}catch(f){output.innerHTML='<span style="color: red; font-size: .75em">'+f.toString()+'</span>'}}function inputLastAnswer(){if(cursor!==void 0){var a=input.value,b=a.split('');b.splice(cursor,0,answer),cursor+=answer.length,input.value=b.join('')}else input.value+=answer}function clearDisplays(){input.value='',output.textContent=''}function clearInput(){input.value=''}function clearLastInput(){var a=input.value,b=a.split('');b.pop(),input.value=b.join('')}function switchUnit(a){var b=a.textContent,c=a.getAttribute('data-alt').split('|');a.textContent=c.shift(),c.push(b),a.setAttribute('data-alt',c.join('|')),unit=a.textContent}
